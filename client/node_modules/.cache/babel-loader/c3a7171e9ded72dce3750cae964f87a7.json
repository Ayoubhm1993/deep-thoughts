{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AYOUB/Desktop/challenges/mern-21/deep-thoughts/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/AYOUB/Desktop/challenges/mern-21/deep-thoughts/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/AYOUB/Desktop/challenges/mern-21/deep-thoughts/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useMutation}from'@apollo/react-hooks';import{ADD_REACTION}from'../../utils/mutations';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReactionForm=function ReactionForm(_ref){var thoughtId=_ref.thoughtId;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),reactionBody=_useState2[0],setBody=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),characterCount=_useState4[0],setCharacterCount=_useState4[1];var _useMutation=useMutation(ADD_REACTION),_useMutation2=_slicedToArray(_useMutation,2),addReaction=_useMutation2[0],error=_useMutation2[1].error;// update state based on form input changes\nvar handleChange=function handleChange(event){if(event.target.value.length<=280){setBody(event.target.value);setCharacterCount(event.target.value.length);}};// submit form\nvar handleFormSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return addReaction({variables:{reactionBody:reactionBody,thoughtId:thoughtId}});case 4:// clear form value\nsetBody('');setCharacterCount(0);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function handleFormSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"m-0 \".concat(characterCount===280||error?'text-error':''),children:[\"Character Count: \",characterCount,\"/280\",error&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:\"Something went wrong...\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"flex-row justify-center justify-space-between-md align-stretch\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Leave a reaction to this thought...\",value:reactionBody,className:\"form-input col-12 col-md-9\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn col-12 col-md-3\",type:\"submit\",children:\"Submit\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{children:\"Something went wrong...\"})]});};export default ReactionForm;","map":{"version":3,"sources":["C:/Users/AYOUB/Desktop/challenges/mern-21/deep-thoughts/client/src/components/ReactionForm/index.js"],"names":["React","useState","useMutation","ADD_REACTION","ReactionForm","thoughtId","reactionBody","setBody","characterCount","setCharacterCount","addReaction","error","handleChange","event","target","value","length","handleFormSubmit","preventDefault","variables","console"],"mappings":"4hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA,OAASC,WAAT,KAA4B,qBAA5B,CACA,OAASC,YAAT,KAA6B,uBAA7B,C,wFAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAmB,IAAhBC,CAAAA,SAAgB,MAAhBA,SAAgB,eACNJ,QAAQ,CAAC,EAAD,CADF,wCAC/BK,YAD+B,eACjBC,OADiB,8BAEMN,QAAQ,CAAC,CAAD,CAFd,yCAE/BO,cAF+B,eAEfC,iBAFe,gCAGLP,WAAW,CAACC,YAAD,CAHN,8CAG/BO,WAH+B,kBAGhBC,KAHgB,kBAGhBA,KAHgB,CAKtC;AACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,KAAK,CAAI,CAC5B,GAAIA,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,MAAnB,EAA6B,GAAjC,CAAsC,CACpCT,OAAO,CAACM,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAP,CACAN,iBAAiB,CAACI,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,MAApB,CAAjB,CACD,CACF,CALD,CAOA;AACA,GAAMC,CAAAA,gBAAgB,2FAAG,iBAAMJ,KAAN,kHACvBA,KAAK,CAACK,cAAN,GADuB,sCAIfR,CAAAA,WAAW,CAAC,CAChBS,SAAS,CAAE,CAAEb,YAAY,CAAZA,YAAF,CAAgBD,SAAS,CAATA,SAAhB,CADK,CAAD,CAJI,QAQrB;AACAE,OAAO,CAAC,EAAD,CAAP,CACAE,iBAAiB,CAAC,CAAD,CAAjB,CAVqB,+EAYrBW,OAAO,CAACT,KAAR,cAZqB,oEAAH,kBAAhBM,CAAAA,gBAAgB,6CAAtB,CAgBA,mBACE,oCACE,WAAG,SAAS,eAAST,cAAc,GAAK,GAAnB,EAA0BG,KAA1B,CAAkC,YAAlC,CAAiD,EAA1D,CAAZ,+BACoBH,cADpB,QAEGG,KAAK,eAAI,aAAM,SAAS,CAAC,MAAhB,qCAFZ,GADF,cAKE,cACE,SAAS,CAAC,gEADZ,CAEE,QAAQ,CAAEM,gBAFZ,wBAIE,iBACE,WAAW,CAAC,qCADd,CAEE,KAAK,CAAEX,YAFT,CAGE,SAAS,CAAC,4BAHZ,CAIE,QAAQ,CAAEM,YAJZ,EAJF,cAWE,eAAQ,SAAS,CAAC,qBAAlB,CAAwC,IAAI,CAAC,QAA7C,oBAXF,GALF,CAqBGD,KAAK,eAAI,gDArBZ,GADF,CAyBD,CAvDD,CAyDA,cAAeP,CAAAA,YAAf","sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { useMutation } from '@apollo/react-hooks';\r\nimport { ADD_REACTION } from '../../utils/mutations';\r\n\r\nconst ReactionForm = ({ thoughtId }) => {\r\n  const [reactionBody, setBody] = useState('');\r\n  const [characterCount, setCharacterCount] = useState(0);\r\n  const [addReaction, { error }] = useMutation(ADD_REACTION);\r\n\r\n  // update state based on form input changes\r\n  const handleChange = event => {\r\n    if (event.target.value.length <= 280) {\r\n      setBody(event.target.value);\r\n      setCharacterCount(event.target.value.length);\r\n    }\r\n  };\r\n\r\n  // submit form\r\n  const handleFormSubmit = async event => {\r\n    event.preventDefault();\r\n\r\n    try {\r\n      await addReaction({\r\n        variables: { reactionBody, thoughtId }\r\n      });\r\n\r\n      // clear form value\r\n      setBody('');\r\n      setCharacterCount(0);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <p className={`m-0 ${characterCount === 280 || error ? 'text-error' : ''}`}>\r\n        Character Count: {characterCount}/280\r\n        {error && <span className=\"ml-2\">Something went wrong...</span>}\r\n      </p>\r\n      <form\r\n        className=\"flex-row justify-center justify-space-between-md align-stretch\"\r\n        onSubmit={handleFormSubmit}\r\n      >\r\n        <textarea\r\n          placeholder=\"Leave a reaction to this thought...\"\r\n          value={reactionBody}\r\n          className=\"form-input col-12 col-md-9\"\r\n          onChange={handleChange}\r\n        ></textarea>\r\n\r\n        <button className=\"btn col-12 col-md-3\" type=\"submit\">\r\n          Submit\r\n        </button>\r\n      </form>\r\n\r\n      {error && <div>Something went wrong...</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReactionForm;\r\n"]},"metadata":{},"sourceType":"module"}